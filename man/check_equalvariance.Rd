% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/check_equalvariance.R
\name{check_equalvariance}
\alias{check_equalvariance}
\title{Check Equal Variance Assumption}
\usage{
check_equalvariance(object, use_test = TRUE)
}
\arguments{
\item{object}{A \code{clean_lm} object. Must contain a \code{model} component
that is a fitted \code{lm} object.}

\item{use_test}{Logical flag indicating whether to run Breusch-Pagan test
(\code{lmtest::bptest}). Defaults to \code{TRUE}.}
}
\value{
A list with the following components:
\item{plot}{A ggplot2 object showing residuals vs. fitted values.}
\item{test_result}{The result of the Breusch-Pagan test, or \code{NULL} if not run
  or if the test errored.}
\item{equalvariance_ok}{Logical indicating whether the equal variance assumption
  appears valid (\code{TRUE}/\code{FALSE}), or a character message if the test
  was skipped or errored.}
\item{object}{The input \code{clean_lm} object with its
  \code{assumptions$equalvariance} field updated.}
}
\description{
Produces a residuals vs. fitted values plot, optionally performs
the Breusch-Pagan test, in order to assess homoscedasticity
(equal variance of residuals) assumption in a fitted linear regression model.
}
\details{
The function checks equal variance both visually (via residuals vs. fitted plot)
and statistically (via the Breusch-Pagan test). A "fan" or "cone" shape in the plot suggests
heteroscedasticity.If the points are roughly evenly scattered around zero with similar spread,
the equal variance assumption is more plausible. If the test succeeds,
\code{equalvariance_ok} is set to \code{TRUE} if the p-value is greater than 0.05,
otherwise \code{FALSE}. If the test errors or is skipped, a character message is
returned prompting the user to interpret the plot visually.
}
\examples{
\dontrun{
fit <- lm(mpg ~ wt + hp, data = mtcars)
clean_fit <- clean_lm(mpg ~ wt + hp, data = mtcars)
result <- check_equalvariance(clean_fit)
result$plot
result$equalvariance_ok
}

}
